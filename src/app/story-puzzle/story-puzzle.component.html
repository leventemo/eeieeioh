<mat-card>
  <mat-card-title>
    <span class="activity-type">Story Puzzle</span><span class="title">{{ data.title }}</span>
    <mat-icon class="icon-inline" (click)="openDialog()">info_outline</mat-icon>
  </mat-card-title>

  <mat-divider inset></mat-divider>

  <mat-card-content *ngIf="stepper === 0">
    <h1 class="tasks">{{ data.tasks[0] }}</h1>

    <ul>
      <li *ngFor="let item of data.cards">
        <span *ngIf="stepper < 2">{{ item.before }}</span>
        <span [ngClass]="getChunkClass()">{{ item.chunk }}</span>
        <span *ngIf="stepper < 2">{{ item.after }}</span>
      </li>
    </ul>

  </mat-card-content>

  <mat-card-content *ngIf="stepper === 1">
    <h1 class="tasks">{{ data.tasks[1] }}</h1>

    <ul>
      <li *ngFor="let item of data.cards">
        <span *ngIf="stepper < 2">{{ item.before }}</span>
        <span [ngClass]="getChunkClass()">{{ item.chunk }}</span>
        <span *ngIf="stepper < 2">{{ item.after }}</span>
      </li>
    </ul>
  </mat-card-content>

  <mat-card-content *ngIf="stepper === 2" class="drag-drop-list" cdkDropList (cdkDropListDropped)="drop($event)">
    <h1 class="tasks margin-btm">{{ data.tasks[2] }}</h1>

    <div class="list-item" *ngFor="let item of chunkArray" cdkDrag>
      <div class="drop-placeholder" *cdkDragPlaceholder></div>
      {{ item }}
    </div>

  </mat-card-content>

  <mat-card-content *ngIf="stepper === 3">
    <h1 class="tasks">{{ data.tasks[3] }}</h1>

    <a *ngIf="stepper === 3" [href]="data.url" class="link-in-text">Read the story</a>

  </mat-card-content>

  <mat-divider inset></mat-divider>

  <mat-card-actions align="end">
    <span class="card-counter">{{ stepper + 1 }}/4</span>
    <button *ngIf="stepper !== 3" color="primary" mat-button (click)="next()">Next</button>
    <button color="primary" mat-button (click)="redirect()">Contents</button>
  </mat-card-actions>
</mat-card>
